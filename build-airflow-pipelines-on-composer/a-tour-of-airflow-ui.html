<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>A tour of the Airflow UI - Getting started with Apache Airflow on Cloud Composer</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../apache-airflow-and-its-concepts.html"><strong aria-hidden="true">2.</strong> Apache Airflow and its concepts</a></li><li class="chapter-item expanded "><a href="../google-cloud-composer/index.html"><strong aria-hidden="true">3.</strong> Google Cloud Composer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../google-cloud-composer/benefits.html"><strong aria-hidden="true">3.1.</strong> Benefits</a></li><li class="chapter-item expanded "><a href="../google-cloud-composer/architecture.html"><strong aria-hidden="true">3.2.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="../google-cloud-composer/version-support-and-deprecation.html"><strong aria-hidden="true">3.3.</strong> Version support and deprecation</a></li><li class="chapter-item expanded "><a href="../google-cloud-composer/limitations.html"><strong aria-hidden="true">3.4.</strong> Limitations</a></li></ol></li><li class="chapter-item expanded "><a href="../build-airflow-pipelines-on-composer/index.html"><strong aria-hidden="true">4.</strong> Build Airflow pipelines on Composer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../build-airflow-pipelines-on-composer/deploy-a-composer-environment.html"><strong aria-hidden="true">4.1.</strong> Deploy a Composer environment</a></li><li class="chapter-item expanded "><a href="../build-airflow-pipelines-on-composer/a-tour-of-airflow-ui.html" class="active"><strong aria-hidden="true">4.2.</strong> A tour of the Airflow UI</a></li><li class="chapter-item expanded "><a href="../build-airflow-pipelines-on-composer/write-the-dags/index.html"><strong aria-hidden="true">4.3.</strong> Write the DAGs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../build-airflow-pipelines-on-composer/write-the-dags/first_dag.html"><strong aria-hidden="true">4.3.1.</strong> First DAG</a></li><li class="chapter-item expanded "><a href="../build-airflow-pipelines-on-composer/write-the-dags/context_manager_dag.html"><strong aria-hidden="true">4.3.2.</strong> Context manager DAG</a></li><li class="chapter-item expanded "><a href="../build-airflow-pipelines-on-composer/write-the-dags/parallel_tasks_dag.html"><strong aria-hidden="true">4.3.3.</strong> Parallel tasks DAG</a></li><li class="chapter-item expanded "><a href="../build-airflow-pipelines-on-composer/write-the-dags/dynamic_tasks_dag.html"><strong aria-hidden="true">4.3.4.</strong> Dynamic tasks DAG</a></li><li class="chapter-item expanded "><a href="../build-airflow-pipelines-on-composer/write-the-dags/branching_dag.html"><strong aria-hidden="true">4.3.5.</strong> Branching DAG</a></li><li class="chapter-item expanded "><a href="../build-airflow-pipelines-on-composer/write-the-dags/xcoms_dag.html"><strong aria-hidden="true">4.3.6.</strong> Xcoms DAG</a></li><li class="chapter-item expanded "><a href="../build-airflow-pipelines-on-composer/write-the-dags/python_operator_and_taskflow_dag.html"><strong aria-hidden="true">4.3.7.</strong> PythonOperator and Taskflow Dag</a></li><li class="chapter-item expanded "><a href="../build-airflow-pipelines-on-composer/write-the-dags/custom_operator_dag.html"><strong aria-hidden="true">4.3.8.</strong> Custom operator DAG</a></li></ol></li><li class="chapter-item expanded "><a href="../case-study/index.html"><strong aria-hidden="true">4.4.</strong> Case study: generate nudges</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../case-study/create-nudges-dag.html"><strong aria-hidden="true">4.4.1.</strong> Create nudges DAG</a></li><li class="chapter-item expanded "><a href="../case-study/testing.html"><strong aria-hidden="true">4.4.2.</strong> Testing</a></li><li class="chapter-item expanded "><a href="../case-study/ci-and-cd.html"><strong aria-hidden="true">4.4.3.</strong> CI and CD</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../set-up-and-run-airflow-locally.html"><strong aria-hidden="true">5.</strong> Set up and run Airflow locally</a></li><li class="chapter-item expanded "><a href="../what-next.html"><strong aria-hidden="true">6.</strong> What's next?</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="../misc/contributors.html">Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Getting started with Apache Airflow on Cloud Composer</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="a-tour-of-the-airflow-ui"><a class="header" href="#a-tour-of-the-airflow-ui">A tour of the Airflow UI</a></h1>
<p>The Airflow UI allows you to monitor and troubleshoot your data pipelines. It can also be helpful to manage Airflow cluster, and you can view and set up Airflow's:</p>
<ul>
<li>Variables</li>
<li>Configurations</li>
<li>Connections</li>
<li>Plugins</li>
<li>Pools</li>
<li>XComs</li>
</ul>
<h2 id="dags-view"><a class="header" href="#dags-view">DAGs view</a></h2>
<p>The default page of Airflow UI is the DAGs view. It lists all the DAGs that are available on this Airflow instance. You can see exactly how many tasks succeeded, failed, or are still running.</p>
<p><img src="https://airflow.apache.org/docs/apache-airflow/stable/_images/dags.png" alt="DAGs view" /></p>
<p>From here, you can manually trigger the DAGs by clicking the <em>Play</em> button. This can be beneficial if you have a scheduled DAG that failed and would like to re-run it:</p>
<p><img src="trigger-dag.png" alt="Trigger dag" /></p>
<p>Note that there is also an option to pass parameters (a JSON blob) when triggering dags. This enabled flexibility when running a DAG:</p>
<p><img src="trigger-dag-with-parameters.png" alt="Trigger dag with parameters" /></p>
<h2 id="individual-dag-views"><a class="header" href="#individual-dag-views">Individual DAG views</a></h2>
<p>After a short tour of the overall DAG view, let's look at some individual DAG views.</p>
<p>There are three kinds of individual DAG views: Tree view, Graph view, and Calendar view.</p>
<h3 id="tree-view"><a class="header" href="#tree-view">Tree view</a></h3>
<p>After clicking the DAG name, the tree view is the default view.</p>
<p>A tree representation of the DAG that spans across time. You can tell each task's status in different colors.</p>
<p><img src="https://airflow.apache.org/docs/apache-airflow/stable/_images/tree.png" alt="Tree view" /></p>
<h3 id="graph-view"><a class="header" href="#graph-view">Graph view</a></h3>
<p>The graph view is my favorite view when I troubleshoot the issue with Airflow UI. It visualizes your DAG's dependencies and their current status for a specific run.</p>
<p><img src="https://airflow.apache.org/docs/apache-airflow/stable/_images/graph.png" alt="Graph view" /></p>
<p>After clicking the task, A pop-up shows, you can conduct a few actions from the pop-up dialog for this specific task instance.</p>
<p><img src="task-instance.png" alt="Task instance" /></p>
<p>One of the most valuable buttons here is <code>Log</code> because it shows you the stack trace.</p>
<p>When a DAG fails, you typically begin the troubleshooting process by:</p>
<ol>
<li>Opening the Airflow UI</li>
<li>Clicking the failed DAG</li>
<li>Going to <code>Graph view</code></li>
<li>Clicking the failed task (marked in <code>red</code>)</li>
<li>On the task instance pop-up dialog, click <code>Log</code> to check the logs. The stacktrace is here:</li>
</ol>
<p><img src="airflow-ui-logs.png" alt="Airflow-ui-logs" /></p>
<p>If the error is caused by some solvable issue (for example, the input file didn't arrive), after fixing the issue, go back to the task instance pop-up dialog and click the <code>Clear</code> button. This will clear the status of the current task instance and it will be re-run. If there are following tasks after it, they will be re-run as well.</p>
<h3 id="calendar-view"><a class="header" href="#calendar-view">Calendar view</a></h3>
<p>The calendar view gives you an overview of your entire DAG's history over months, or even years. Letting you quickly see trends of the overall success/failure rate of runs overtime.</p>
<p>It can be pretty handy to get an idea of how stable the DAG is. For example, if your DAG is waiting for files to land on a Cloud Storage bucket, this can tell you if they have been late in the past X days:</p>
<p><img src="https://airflow.apache.org/docs/apache-airflow/stable/_images/calendar.png" alt="Calendar view" /></p>
<h2 id="admin-pages"><a class="header" href="#admin-pages">Admin pages</a></h2>
<h3 id="variable-view"><a class="header" href="#variable-view">Variable view</a></h3>
<p>The variable view allows you to list, create, edit or delete the key-value pairs used in Airflow pipelines.</p>
<p>Value of a variable will be hidden if the key contains any words in (<code>password</code>, <code>secret</code>, <code>passwd</code>, <code>authorization</code>, <code>api_key</code>, <code>apikey</code>, <code>access_token</code>) by default, but can be configured to show in plain-text.</p>
<p>It is generally <em>not</em> recommended to store sensitive data like passwords and API keys within Airflow variables. On Google Cloud, Cloud Composer has native integration with <a href="https://cloud.google.com/secret-manager/docs">Google Cloud Secret Manager</a>; you can find a detailed guide on how to use it <a href="https://cloud.google.com/composer/docs/secret-manager">here</a>.</p>
<p>Airflow variables can be helpful to store insensitive environment variables. For example, database connection strings, API endpoints, GCS bucket names or paths, etc.</p>
<p><img src="https://airflow.apache.org/docs/apache-airflow/stable/_images/variable_hidden.png" alt="Variable view" /></p>
<h3 id="configuration-view"><a class="header" href="#configuration-view">Configuration view</a></h3>
<p>The Configuration view page displays all the Airflow configurations, including the ones in <code>airflow.cfg</code> and <code>Running Configuration</code>.</p>
<p><img src="airflow-ui-config-cfg.png" alt="Airflow-cfg" /></p>
<p><img src="airflow-ui-config-running.png" alt="Airflow-running-configuration" /></p>
<p>Note that default configurations in <code>airflow.cfg</code> are overwritten by the environment variables. As per <a href="https://cloud.google.com/composer/docs/overriding-airflow-configurations">Google document</a>, these environment variables can be set from cloud console, gcloud cli, API, and Terraform.</p>
<h3 id="connection-view"><a class="header" href="#connection-view">Connection view</a></h3>
<p>In the context of Airflow, a <code>connection</code> stores information such as hostname, port, login, and passwords to other systems and services. The pipeline code you will author will reference the <code>conn_id</code> of the Connection objects.</p>
<p>On the connection view page, connections information is shown and can be edited:</p>
<p><img src="https://airflow.apache.org/docs/apache-airflow/stable/_images/connections.png" alt="Connection view" /></p>
<p>In the <a href="deploy-a-composer-environment.html">last chapter</a>, we deployed a Cloud Composer environment with a service account. In the Airflow pipelines in Composer, by default, they will use this service account to authorize all the Google Cloud API calls. This saves time setting up Google Cloud connection on the Airflow configuration view page.</p>
<h3 id="xcoms-view"><a class="header" href="#xcoms-view">XComs view</a></h3>
<p><a href="https://airflow.apache.org/docs/apache-airflow/stable/concepts/xcoms.html">XComs</a> (short for <em>cross-communications</em>) is a mechanism that let tasks talk to each other, as by default, Tasks are entirely isolated and may be running on completely different machines.</p>
<p>XComs view page shows all the values that are stored as XComs. It can be helpful when troubleshooting failed DAGs that use XComs to pass the values from one task to another:</p>
<p><img src="airflow-ui-xcoms.png" alt="XComs" /></p>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>Airflow UI can be pretty valuable for:</p>
<ul>
<li>Data engineers to troubleshoot DAG failures</li>
<li>Managers to quickly get an idea about scheduled workloads</li>
<li>Administrators to set up Variables and Connections. However, these are better done via deployment scripts via gcloud cli, API, or Terraform</li>
</ul>
<p>That's all for the UI bit, time to write and run some DAGs.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../build-airflow-pipelines-on-composer/deploy-a-composer-environment.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../build-airflow-pipelines-on-composer/write-the-dags/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../build-airflow-pipelines-on-composer/deploy-a-composer-environment.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../build-airflow-pipelines-on-composer/write-the-dags/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
